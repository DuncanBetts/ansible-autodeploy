---
dependencies:
  - role: meta/slack
    slack_dry_run: yes
  - role: package/ansible
  - role: package/postgres
    postgres_client: yes
    when: "autodeploy_database_engine == 'postgres' and autodeploy_database_bundled"
  - role: package/mariadb
    mariadb_client: yes
    when: "autodeploy_database_engine == 'mysql-compatible' and autodeploy_database_bundled"
  - role: package/nodejs
    when: autodeploy_listener == 'node'
  - role: package/monit
    when: autodeploy_listener == 'node'
  - role: package/python
    python_legacy_support: yes
    python_packages:
      - ansible
  - role: package/upstart
    upstart_name: initial_deploy
    upstart_description: 'Initial deploy of all code repos'
    upstart_group: "{{ autodeploy_group }}"
    upstart_user: "{{ autodeploy_user }}"
    upstart_exec_path: curl http://localhost:81
    upstart_log_root: "{{ autodeploy_log_root }}"
    upstart_pidfile_path: "{{ autodeploy_pidfile_path }}"
    upstart_runtime_root: "{{ autodeploy_runtime_root }}"
    when: autodeploy_initial_deploy
